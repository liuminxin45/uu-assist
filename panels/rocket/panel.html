<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Rocket</title>
  <script src="../../shared/theme.js" defer></script>
  <link rel="stylesheet" href="../../shared/styles.css">
  <style>
    /* Rocket页面特定样式 */
    .form-group {
      margin-bottom: var(--space-lg);
    }
    
    .form-group:last-child {
      margin-bottom: 0;
    }
    
    textarea#prompt {
      min-height: 120px;
      resize: vertical;
      font-family: inherit;
      line-height: 1.5;
    }
    
    input[type="number"] {
      -moz-appearance: textfield;
      width: 100px;
    }
    
    input[type="number"]::-webkit-outer-spin-button,
    input[type="number"]::-webkit-inner-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }
    
    .status {
      white-space: pre-wrap;
      background: var(--bg-primary);
      border: 1px solid var(--border-light);
      border-radius: var(--radius-md);
      padding: var(--space-md);
      min-height: 120px;
      max-height: 240px;
      overflow-y: auto;
      font-family: 'SF Mono', Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, 'Courier New', monospace;
      font-size: 13px;
      line-height: 1.5;
      color: var(--text-secondary);
      scrollbar-width: thin;
      scrollbar-color: var(--border-dark) transparent;
    }
    
    #aiReply.status {
      min-height: 180px;
      max-height: 300px;
      resize: vertical;
    }
    
    .actions {
      display: flex;
      gap: var(--space-sm);
      flex-wrap: wrap;
      margin-top: var(--space-md);
    }
    
    /* 加载动画 */
    @keyframes pulse {
      0%, 100% {
        opacity: 1;
      }
      50% {
        opacity: 0.5;
      }
    }
    
    .pulse {
      animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="content-wrapper">
      <!-- 头部 -->
      <div class="header">
        <div class="header-top">
          <h2>Rocket</h2>
          <div class="header-controls">
            <!-- 下拉菜单按钮 -->
            <div class="dropdown">
              <button id="panelSwitchBtn" class="dropdown-btn">
                🚀
                <span class="dropdown-arrow">▼</span>
              </button>
              <div id="panelDropdown" class="dropdown-content">
                <a href="#" data-target="pha-panel" class="dropdown-item">👁️ PHA</a>
                <a href="#" data-target="rocket-panel" class="dropdown-item active">🚀 Rocket</a>
                <a href="#" data-target="notes-panel" class="dropdown-item">📝 笔记</a>
                <a href="#" data-target="settings-panel" class="dropdown-item">⚙️ 设置</a>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- 主内容 -->
      <div class="inner-pad">
        <!-- 配置卡片 -->
        <div class="row">
          <div class="card">
            <div class="form-group">
              <label for="msgLimit">消息数量限制</label>
              <input id="msgLimit" type="number" min="1" max="200" step="1" value="20" />
              <div class="hint">设置要处理的消息数量上限</div>
            </div>
            
            <div class="form-group">
              <div class="switch">
                <input id="autoListen" type="checkbox" checked title="自动监听生成开关" />
                <label for="autoListen">自动监听消息</label>
              </div>
            </div>
            
            <div class="form-group">
              <label for="prompt">自定义提示词</label>
              <textarea id="prompt" placeholder="留空则使用预置提示词"></textarea>
            </div>
          </div>
        </div>
        
        <!-- 状态日志卡片 -->
        <div class="row">
          <div class="card">
            <label for="status">状态日志</label>
            <div id="status" class="status"></div>
          </div>
        </div>
        
        <!-- AI回复卡片 -->
        <div class="row">
          <div class="card">
            <label for="aiReply">AI 输出</label>
            <textarea id="aiReply" class="status" readonly placeholder="AI 输出结果将显示在这里"></textarea>
            <div class="actions">
              <button id="btnCopyAIReply" class="btn btn-primary" title="复制AI回复">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                  <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                </svg>
                复制
              </button>
              <button id="btnClearAIReply" class="btn" title="清空AI回复">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M3 6h18"></path>
                  <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                  <line x1="10" y1="11" x2="10" y2="17"></line>
                  <line x1="14" y1="11" x2="14" y2="17"></line>
                </svg>
                清空
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- 隐藏的侧边栏导航，保留以确保rail.js的功能正常 -->
  <nav class="rail" aria-label="面板切换" style="display: none;">
    <button class="railbtn" data-target="pha-panel" title="PHA" aria-label="PHA">👁️</button>
    <button class="railbtn active" data-target="rocket-panel" title="Rocket" aria-label="Rocket">🚀</button>
    <button class="railbtn" data-target="notes-panel" title="笔记" aria-label="笔记">📝</button>
    <button class="railbtn" data-target="settings-panel" title="设置" aria-label="设置">⚙️</button>
  </nav>

  <script type="module" src="./panel.js"></script>
  <script defer src="../../rail.js"></script>
  <script type="module" src="../persist-init.js"></script>
  <script defer src="../../shared/dropdown-menu.js"></script>
</body>
</html>
