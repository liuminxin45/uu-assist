<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>PHA</title>
  <script src="../../shared/theme.js" defer></script>
  <link rel="stylesheet" href="../../shared/styles.css">
  <style>
    /* 设计系统：CSS变量重构 */
    :root {
      /* 主题颜色 */
      --primary: #3b82f6;       /* 主色：蓝色 */
      --primary-hover: #2563eb; /* 主色悬浮 */
      --primary-active: #1d4ed8; /* 主色激活 */
      --primary-light: #dbeafe; /* 主色浅色 */
      --primary-weak: rgba(59, 130, 246, 0.12); /* 主色弱色 */
      
      /* 文本颜色 */
      --text-primary: #111827;  /* 主要文本 */
      --text-secondary: #374151; /* 次要文本 */
      --text-muted: #6b7280;    /* -muted文本 */
      --text-disabled: #9ca3af; /* 禁用文本 */
      
      /* 背景颜色 */
      --bg-primary: #ffffff;    /* 主要背景 */
      --bg-secondary: #f9fafb;  /* 次要背景 */
      --bg-tertiary: #f3f4f6;   /* 第三级背景 */
      --bg-muted: #f8fafc;      /* -muted背景 */
      --bg-overlay: rgba(255, 255, 255, 0.8); /* 覆盖层背景 */
      
      /* 边框颜色 */
      --border-light: #e5e7eb;  /* 浅色边框 */
      --border-default: #d1d5db; /* 默认边框 */
      --border-dark: #9ca3af;   /* 深色边框 */
      
      /* 状态颜色 */
      --success: #10b981;       /* 成功色 */
      --warning: #f59e0b;       /* 警告色 */
      --error: #ef4444;         /* 错误色 */
      
      /* 阴影 */
      --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
      --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
      --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
      --shadow-focus: 0 0 0 3px var(--primary-weak);
      
      /* 圆角 */
      --radius-sm: 6px;
      --radius-md: 8px;
      --radius-lg: 10px;
      --radius-xl: 12px;
      --radius-full: 9999px;
      
      /* 间距 */
      --space-xs: 4px;
      --space-sm: 8px;
      --space-md: 12px;
      --space-lg: 16px;
      --space-xl: 20px;
      --space-2xl: 24px;
      
      /* 过渡动画 */
      --transition-fast: 100ms ease;
      --transition-normal: 150ms ease;
      --transition-slow: 200ms ease;
      
      /* 侧边栏按钮尺寸 */
      --rail-btn: 48px;
      
      /* 主题控制变量 */
    --theme: light;
    --theme-dark: 0;
    --theme-light: 1;
  }

  /* 深色模式支持 */
    @media (prefers-color-scheme: dark) {
      :root {
        /* 主题颜色 - 深色模式 */
        --primary: #3b82f6;
        --primary-hover: #60a5fa;
        --primary-active: #93c5fd;
        --primary-light: #1e3a8a;
        --primary-weak: rgba(59, 130, 246, 0.15);
        
        /* 文本颜色 - 深色模式 */
        --text-primary: #f9fafb;
        --text-secondary: #f3f4f6;
        --text-muted: #9ca3af;
        --text-disabled: #6b7280;
        
        /* 背景颜色 - 深色模式 */
        --bg-primary: #111827;
        --bg-secondary: #1f2937;
        --bg-tertiary: #374151;
        --bg-muted: #0f172a;
        --bg-overlay: rgba(15, 23, 42, 0.8);
        
        /* 边框颜色 - 深色模式 */
        --border-light: #374151;
        --border-default: #4b5563;
        --border-dark: #6b7280;
        
        /* 阴影 - 深色模式 */
        --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.2);
        --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.3), 0 2px 4px -1px rgba(0, 0, 0, 0.2);
        --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.4), 0 4px 6px -2px rgba(0, 0, 0, 0.3);
        
        /* 主题控制变量 */
        --theme: dark;
        --theme-dark: 1;
        --theme-light: 0;
      }
    }
    
    /* 基础样式重置 */
    *, *::before, *::after {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    html, body {
      height: 100%;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
        'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
        sans-serif;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
    
    body {
      margin: 0;
      font-size: 14px;
      line-height: 1.6;
      color: var(--text-primary);
      background: var(--bg-secondary);
      display: flex;
      flex-direction: column;
      /* 确保不会出现顶部边框或轮廓 */
      border-top: 0 !important;
      outline: 0 !important;
    }

    /* 防止任何可能导致body上方出现红色虚线的伪元素样式 */
    body::before {
      display: none !important;
    }
    
    
    .content-wrapper{
      height: 100vh;
      display: flex;
      flex-direction: column;
      background: var(--bg-secondary);
    }
    
    /* 隐藏taskMeta元素 */
    #taskMeta {
      display: none !important;
    }

    
    /* 下拉菜单样式 */
    .dropdown {
      position: relative;
      display: inline-block;
    }
    
    /* 响应式设计 */
    @media (max-width: 640px) {
      .dropdown-content {
        min-width: 100px;
        right: auto;
        left: 50%;
        transform: translateX(-50%);
      }
    }
    
    /* 行与分栏 */
    .row{
      margin-bottom:var(--space-lg);
    }
    
    .split{
      display:flex;
      gap:var(--space-md);
      align-items:center;
    }
    
    .split>:first-child{
      flex:1;
      min-width:0;
    }
    
    .muted{
      color:var(--text-secondary);
    }
    
    /* 链接、卡片 */
    .link{
      color:var(--primary);
      text-decoration:none;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
      transition:opacity var(--transition-fast);
    }
    
    .link:hover{
      text-decoration:underline;
    }
    

    
    /* 状态区域 */
    .status,
    #taskStatus{
      white-space:pre-wrap;
      background:var(--bg-primary);
      border:1px solid var(--border-light);
      border-radius:var(--radius-md);
      padding:var(--space-md);
      min-height:120px;
      max-height:220px;
      overflow:auto;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size:12px;
      line-height:1.6;
      color: #999999;
    }

    #taskStatus{
      min-height: auto;
      max-height: auto;
      background: transparent;
      border: none;
      padding: 0;
    }
    
    /* 输入与选择 */
    .input-common,
    .select-common,
    input[type="text"],
    textarea{
      background:var(--bg-primary);
      border:1px solid var(--border-light);
      outline:none;
      width:100%;
      padding:var(--space-md) var(--space-md);
      border-radius:var(--radius-md);
      box-shadow:var(--shadow-sm);
      transition:box-shadow var(--transition-normal), border-color var(--transition-normal), background-color var(--transition-normal);
      font-family: inherit;
      font-size: inherit;
      color: var(--text-primary);
    }
    
    .input-common::placeholder,
    input::placeholder,
    textarea::placeholder{
      color:var(--text-muted);
    }
    
    .input-common:focus,
    .select-common:focus,
    input:focus,
    textarea:focus{
      box-shadow:0 0 0 3px var(--primary-weak);
      border-color:var(--primary);
      outline:none;
    }
    
    .input-common:disabled,
    .select-common:disabled,
    input:disabled,
    textarea:disabled{
      opacity:.6;
      cursor:not-allowed;
      background-color:var(--bg-tertiary);
    }
    
    /* 选择框特殊样式 */
    .select-common{
      width:100%;
      padding:var(--space-sm) var(--space-md);
      padding-right:calc(var(--space-md) + 24px);
      border:1px solid var(--border-light);
      border-radius:var(--radius-md);
      background-color:var(--bg-primary);
      color:var(--text-primary);
      font-size:12px;
      font-weight: bold;
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      cursor:pointer;
      transition:all var(--transition-fast);
      appearance:none;
      -webkit-appearance:none;
      -moz-appearance:none;
      background-image:
        linear-gradient(transparent,transparent),
        url('data:image/svg+xml;charset=utf-8,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"%3E%3Cpolyline points="6 9 12 15 18 9"%3E%3C/polyline%3E%3C/svg%3E');
      background-repeat:no-repeat;
      background-position:right var(--space-md) center;
      background-size:16px 16px;
    }
    
    .select-common:hover{
      border-color:var(--primary);
    }
    
    .select-common:focus{
      outline:none;
      border-color:var(--primary);
      box-shadow:0 0 0 2px rgba(66, 153, 225, 0.2);
    }
    
    /* 文本域与工具栏 */
    #txtContent{
      font:inherit;
      line-height:inherit;
      font-size:12px !important;
      white-space:pre-wrap;
      min-height:200px;
      resize: vertical;
      color: var(--text-primary);
    }
    
    .mdbar{
      display:flex;
      gap:var(--space-xs);
      flex-wrap:wrap;
      border:1px solid var(--border-light);
      border-bottom:none;
      border-radius:var(--radius-md) var(--radius-md) 0 0;
      padding:var(--space-sm);
      background:var(--bg-tertiary);
    }
    
    .mdbtn{
      padding:var(--space-xs) var(--space-sm);
      border:1px solid var(--border-light);
      border-radius:var(--radius-sm);
      background:var(--bg-primary);
      cursor:pointer;
      font-size:13px;
      user-select:none;
      transition:all var(--transition-fast);
      display:flex;
      align-items:center;
      gap:4px;
      color: var(--text-primary);
    }
    
    .mdbtn:hover{
      background:var(--bg-secondary);
      border-color:var(--primary);
      transform: translateY(-1px);
    }
    
    .mdbtn:active{
      transform: translateY(0);
    }
    
    /* 复选框样式 */
    .switch-ai{
      display:flex;
      align-items:center;
      gap:var(--space-md);
      padding:var(--space-sm) 0;
    }
    
    .switch-ai input[type="checkbox"]{
      appearance: none;
      width: 20px;
      height: 20px;
      border: 1px solid var(--border-light);
      border-radius: var(--radius-sm);
      background-color: var(--bg-primary);
      cursor: pointer;
      position: relative;
      transition: all var(--transition-fast);
    }
    
    .switch-ai input[type="checkbox"]:checked{
      background-color: var(--primary);
      border-color: var(--primary);
    }
    
    .switch-ai input[type="checkbox"]:checked::after{
      content: '✓';
      color: white;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 12px;
      font-weight: bold;
    }
    
    .switch-ai input[type="checkbox"]:hover{
      border-color: var(--primary);
    }
    
    .switch-ai label{
      margin:0;
      font-weight:600;
      color:var(--text-primary);
      font-size:13px;
      cursor: pointer;
    }
    
    .textarea-wrap{
      border:1px solid var(--border-light);
      border-radius:0 0 var(--radius-md) var(--radius-md);
      overflow:hidden;
      background:var(--bg-primary);
    }
    
    .textarea-wrap textarea{
      border:none;
      border-radius:0;
      box-shadow: none;
      resize: vertical;
      color: var(--text-primary);
    }
    
    .drop{
      min-height:140px;
    }
    
    /* 按钮 */
    .btn-common{
      background:var(--bg-primary);
      border:1px solid var(--border-light);
      padding:var(--space-sm) var(--space-md);
      border-radius:var(--radius-md);
      cursor:pointer;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      font:inherit;
      font-weight:500;
      line-height:1.2;
      transition:all var(--transition-fast);
      box-shadow:var(--shadow-sm);
      color:var(--text-primary);
      gap:var(--space-xs);
    }
    
    .btn-common:hover:not(:disabled){
      background:var(--bg-secondary);
      border-color:var(--primary);
      color:var(--primary);
      transform: translateY(-1px);
      box-shadow:var(--shadow-md);
    }
    
    .btn-common:active:not(:disabled){
      transform: translateY(0);
    }
    
    .btn-common[disabled]{
      opacity:.6;
      cursor:not-allowed;
      transform: none;
    }
    
    /* 图标按钮 */
    .btn-icon{
      width:var(--rail-btn);
      min-width:var(--rail-btn);
      height:var(--rail-btn);
      padding:0;
      background:var(--bg-primary);
      border:1px solid var(--border-light);
      border-radius:var(--radius-md);
      cursor:pointer;
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:16px;
      transition:all var(--transition-fast);
      box-shadow:var(--shadow-sm);
      color:var(--text-primary);
    }
    
    .btn-icon:hover:not(:disabled){
      background:var(--bg-secondary);
      border-color:var(--primary);
      color:var(--primary);
      transform: translateY(-1px);
      box-shadow:var(--shadow-md);
    }
    
    /* 侧边栏 */
    .rail{
      display:flex;
      flex-direction:column;
      gap:var(--space-sm);
      padding:var(--space-md);
      background:var(--bg-primary);
      border-radius:var(--radius-lg);
      box-shadow:var(--shadow-md);
      height:fit-content;
      align-self:flex-start;
      min-width:var(--rail-btn);
    }
    
    .railbtn{
      width:var(--rail-btn);
      height:var(--rail-btn);
      border:2px solid transparent;
      background:var(--bg-tertiary);
      border-radius:var(--radius-md);
      font-size:18px;
      cursor:pointer;
      display:flex;
      align-items:center;
      justify-content:center;
      transition:all var(--transition-fast);
      color:var(--text-secondary);
    }
    
    .railbtn:hover{
      background:var(--bg-secondary);
      color:var(--text-primary);
      transform: translateY(-1px);
    }
    
    .railbtn:active{
      transform: translateY(0);
    }
    
    .railbtn.active{
      background:var(--primary-weak);
      color:var(--primary);
      border-color:var(--primary);
    }
    
    /* 对话框 */
    dialog{
      border:none;
      border-radius:var(--radius-lg);
      padding:var(--space-xl);
      box-shadow:var(--shadow-lg);
      background:var(--bg-primary);
      color:var(--text-primary);
      max-width:90vw;
      width:500px;
    }
    
    dialog::backdrop{
      background:rgba(0,0,0,0.5);
      backdrop-filter: blur(4px);
    }
    
    dialog h3{
      margin:0 0 var(--space-lg) 0;
      font-size:18px;
      color:var(--text-primary);
      font-weight:600;
    }
    
    /* 任务元信息 */
    #taskMetaBox{
      padding:var(--space-lg);
    }
    
    #taskTitle{
      font-weight:600;
      word-break:break-all;
      font-size:15px;
      margin-bottom:var(--space-xs);
    }
    
    #taskMetaMore{
      margin-top:var(--space-lg);
      padding-top:var(--space-lg);
      border-top:1px solid var(--border-light);
      animation: fadeIn var(--transition-normal);
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-5px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    /* 按钮组 - 修改为上下垂直排列 */
    .btn-group{
      display:flex;
      flex-direction: column;
      gap:var(--space-sm);
      margin-top:var(--space-md);
    }
    
    .btn-group button{
      flex:1;
      padding:var(--space-sm) var(--space-md);
      border:1px solid var(--border-light);
      border-radius:var(--radius-md);
      background-color:var(--bg-primary);
      color:var(--text-primary);
      font-size:13px;
      cursor:pointer;
      transition:all var(--transition-fast);
    }
    
    .btn-group button:hover{
      background-color:var(--bg-secondary);
      border-color:var(--primary);
    }
    
    .btn-group button.primary{
      background-color:var(--primary);
      color:white;
      border-color:var(--primary);
    }
    
    .btn-group button.primary:hover{
      background-color:var(--primary-active);
    }
    
    .btn-group button.danger{
      background-color:var(--error);
      color:white;
      border-color:var(--error);
    }
    
    .btn-group button.danger:hover{
      background-color:#dc2626;
    }
    
    /* 滚动条 */
    *{
      scrollbar-width:thin;
      scrollbar-color:var(--border-light) var(--bg-primary);
    }
    
    *::-webkit-scrollbar{
      width:6px;
      height:6px;
    }
    
    *::-webkit-scrollbar-track{
      background:var(--bg-primary);
      border-radius:3px;
    }
    
    *::-webkit-scrollbar-thumb{
      background:var(--border-light);
      border-radius:3px;
      transition:background-color var(--transition-fast);
    }
    
    /* PHA页面特定样式 */
    #txtContent{
      font:inherit;
      line-height:inherit;
      white-space:pre-wrap;
      min-height:140px;
      max-height:280px;
      resize: vertical;
      color: var(--text-primary);
    }
    
    .mdbar{
      display:flex;
      gap:var(--space-xs);
      flex-wrap:wrap;
      border:1px solid var(--border-light);
      border-bottom:none;
      border-radius:var(--radius-md) var(--radius-md) 0 0;
      padding:var(--space-sm);
      background:var(--bg-tertiary);
    }
    
    .mdbtn{
      padding:var(--space-xs) var(--space-sm);
      border:1px solid var(--border-light);
      border-radius:var(--radius-sm);
      background:var(--bg-primary);
      cursor:pointer;
      font-size:13px;
      user-select:none;
      transition:all var(--transition-fast);
      display:flex;
      align-items:center;
      gap:4px;
      color: var(--text-primary);
    }
    
    .mdbtn:hover{
      background:var(--bg-secondary);
      border-color:var(--primary);
      transform: translateY(-1px);
    }
    
    .mdbtn:active{
      transform: translateY(0);
    }
    
    .textarea-wrap{
      border:1px solid var(--border-light);
      border-radius:0 0 var(--radius-md) var(--radius-md);
      overflow:hidden;
      background:var(--bg-primary);
    }
    
    .textarea-wrap textarea{
      border:none;
      border-radius:0;
      box-shadow: none;
      resize: vertical;
      color: var(--text-primary);
    }
    
    .drop{
      min-height:140px;
    }
    
    #taskMetaBox{
      padding:var(--space-lg);
    }
    
    #taskTitle{
      font-weight:600;
      word-break:break-all;
      font-size:15px;
      margin-bottom:var(--space-xs);
    }
    
    #taskMetaMore{
      margin-top:var(--space-lg);
      padding-top:var(--space-lg);
      border-top:1px solid var(--border-light);
      animation: fadeIn var(--transition-normal);
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-5px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="content-wrapper">
      <div class="header">
        <div class="header-top">
          <h2>PHA</h2>
          <div class="header-controls">
            <!-- 下拉菜单按钮 -->
            <div class="dropdown">
            <button id="panelSwitchBtn" class="dropdown-btn">
              <span class="dropdown-arrow">▼</span>
            </button>
            <div id="panelDropdown" class="dropdown-content">
              <a href="#" data-target="pha-panel" class="dropdown-item active">👁️ PHA</a>
              <a href="#" data-target="rocket-panel" class="dropdown-item">🚀 Rocket</a>
              <a href="#" data-target="notes-panel" class="dropdown-item">📝 笔记</a>
              <a href="#" data-target="todo-panel" class="dropdown-item">📋 待办事项</a>
              <a href="#" data-target="settings-panel" class="dropdown-item">⚙️ 设置</a>
</div>
            </div>
          </div>
        </div>
      </div>
      
      <div class="inner-pad">
        <div class="row" style="display:none">
            <div class="split">
              <input id="listUrl" class="input-common" type="text" value="http://pha.tp-link.com.cn/maniphest/query/ITSeQjt2W8tk/#R" placeholder="列表页 URL" style="display:none">
            </div>
          </div>

        <div class="row">
          <div class="split">
            <select id="selItems" class="select-common"></select>
            <a id="taskLink" href="#" target="_blank" rel="noopener" class="link"></a>
          </div>
        </div>

        <div class="row" id="taskMeta" style="display:none">
          <div id="taskMetaBox" class="card">
            <div style="display:flex;justify-content:space-between;align-items:flex-start;gap:var(--space-md)">
              <div style="min-width:0">
                <div id="taskTitle"></div>
                <div class="muted" style="margin-top:var(--space-xs);font-size:13px">
                  <span id="taskStatus"></span><span style="margin:0 6px">·</span><span id="taskPriority"></span>
                </div>
              </div>
              <button id="metaToggle" class="btn-common" title="展开/收起">▾</button>
            </div>
            <div id="taskMetaMore" style="margin-top:0;display:none"></div>
          </div>
        </div>

        <div class="row">
          <div class="mdbar" id="mdBar">
            <button class="mdbtn" data-md="h2" title="H">H2</button>
            <button class="mdbtn" data-md="link" title="链接">
              <span>🔗</span>
            </button>
            <button class="mdbtn" data-md="ul" title="无序">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7 12H21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M7 6H21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M3 6V8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M3 12V14" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M7 18H21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M3 18V20" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
            </button>
            <button class="mdbtn" data-md="quote" title="引用">
              <span>"</span>
            </button>
            <button class="mdbtn" data-md="codeblock" title="代码">
              <span>{}</span>
            </button>
          </div>

          <div class="row" style="margin-bottom:var(--space-sm)">
            <div class="textarea-wrap">
              <textarea id="txtContent" class="input-common drop" rows="7" placeholder="在此记录您的内容..."></textarea>
            </div>
          </div>
        </div>


        <div class="row">
          <div class="btn-group">
            <button id="btnLoad" class="btn-common" title="拉取">
              拉取列表
            </button>
            <button id="btnBind" class="btn-common" title="绑定" style="display:none">
              绑定当前页
            </button>
            <button id="btnGerrit" class="btn-common" title="Gerrit 模板">
              Gerrit
            </button>
            <button id="btnTpl" class="btn-common" title="编辑模板" style="display:none">
              模板
            </button>
            <button id="btnSumWL" class="btn-common" title="统计工作量">
              统计
            </button>
            <button id="btnWeekly" class="btn-common" title="周报生成">
              周报
            </button>
            <button id="btnSend" class="btn-common" title="提交评论" style="background-color:var(--primary);color: white;border-color:var(--primary)">
              推送
            </button>
          </div>
        </div>

        <div class="row">
          <div id="status" class="status"></div>
        </div>
      </div>
    </div>

    <!-- 隐藏的侧边栏导航，保留以确保rail.js的功能正常 -->
    <nav class="rail" aria-label="面板切换" style="display: none;">
      <button class="railbtn active" data-target="pha-panel" title="PHA" aria-label="PHA">👁️</button>
      <button class="railbtn" data-target="rocket-panel" title="Rocket" aria-label="Rocket">🚀</button>
      <button class="railbtn" data-target="notes-panel" title="笔记" aria-label="笔记">📝</button>
      <button class="railbtn" data-target="settings-panel" title="设置" aria-label="设置">⚙️</button>
    </nav>
  </div>

  <!-- 工作量选择弹窗 -->
  <dialog id="dlgEffort">
    <h3>工作量</h3>
    <select id="effortSelect" class="select-common" style="width:100%">
      <option value="">选择</option>
      <option>0.5D</option>
      <option>1D</option>
      <option>2D</option>
      <option>3D</option>
      <option>5D</option>
    </select>
    <div style="display:flex;gap:var(--space-md);justify-content:flex-end;margin-top:var(--space-lg)">
      <button id="effortCancel" class="btn-common">取消</button>
    </div>
  </dialog>

  <!-- POST 模板编辑弹窗 -->
  <dialog id="dlgTpl" style="max-width:640px;width:90vw">
    <h3>模板</h3>
    <textarea id="tplArea" class="input-common" rows="12"
      placeholder="> {{timestamp}}\n(NOTE) {{AITitle}}\n\n{{AIResponse}}\n------\n{{正文}}"></textarea>
    <div style="display:flex;gap:var(--space-md);justify-content:flex-end;margin-top:var(--space-lg)">
      <button id="tplCancel" class="btn-common">取消</button>
      <button id="tplSave" class="btn-common" style="background-color:var(--primary);color: white;border-color:var(--primary)">保存</button>
    </div>
  </dialog>

  <script type="module" src="../persist-init.js"></script>
  <script defer src="panel.js"></script>
  <script defer src="../../rail.js"></script>
  <script defer src="../../shared/dropdown-menu.js"></script>
</body>
</html>
