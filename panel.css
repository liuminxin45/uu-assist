/* ===== 基础一致性 ===== */
*,*::before,*::after{ box-sizing:border-box; }
html,body{ height:100%; }
:root{
  /* 尺寸与圆角 */
  --rail-btn:38px;
  --radius:10px; --radius-sm:8px;
  /* 颜色 */
  --primary:#2563eb; --primary-weak:rgba(37,99,235,.12);
  --text:#0f172a; --muted:#6b7280;
  --bg:#ffffff; --bg-muted:#f8fafc;
  --border:#e5e7eb;
  /* 阴影 */
  --shadow-sm:0 1px 2px rgba(0,0,0,.08);
  --shadow-md:0 2px 6px rgba(0,0,0,.25);
}

/* ===== 通用控件（提取自页面内联样式） ===== */

/* 行与分栏 */
.row{ margin-top:10px; }
.split{ display:flex; gap:8px; align-items:center; }
.split>:first-child{ flex:1; min-width:0; }
.muted{ color:var(--muted); }

/* 链接与徽标 */
.link{ color:var(--primary); text-decoration:none; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.link:hover{ text-decoration:underline; }
.pill{ display:inline-block; padding:2px 8px; border-radius:999px; background:#eef2ff; color:#3730a3; font-size:12px; border:1px solid #c7d2fe; }

/* 卡片与状态区 */
.card{ background:var(--bg); border:1px solid var(--border); border-radius:var(--radius); box-shadow:var(--shadow-sm); }
.status{ white-space:pre-wrap; background:var(--bg); border:1px dashed var(--border); border-radius:var(--radius); padding:8px; min-height:120px; max-height:220px; overflow:auto; }

/* ===== 按钮 ===== */
.btn-common{
  background:var(--bg); border:1px solid var(--border);
  padding:8px 12px; border-radius:6px; cursor:pointer;
  display:inline-flex; align-items:center; justify-content:center;
  font:inherit; line-height:1.2;
  transition:transform .2s ease, color .2s ease, box-shadow .2s ease, border-color .2s ease;
  box-shadow:var(--shadow-sm);
}
.btn-common:hover{ box-shadow:0 2px 5px rgba(0,0,0,.20); border-color:var(--primary); }
.btn-common:active{ transform:translateY(1px); }
.btn-common:focus-visible{ outline:1.5px solid rgba(37,99,235,.45); outline-offset:1px; }
.btn-common[disabled]{ opacity:.6; cursor:not-allowed; }

/* 图标按钮：仅对📥/🔗等小方按钮收敛尺寸（不改DOM） */
#btnLoad,#btnBind{ width:var(--rail-btn); min-width:var(--rail-btn); height:var(--rail-btn); padding:0; }

/* ===== 文本输入 ===== */
.input-common{
  background:var(--bg); border:1px solid var(--border); outline:none; width:100%;
  padding:8px 12px; border-radius:var(--radius);
  transition:box-shadow .2s ease, border-color .2s ease, background-color .2s ease;
  box-shadow:var(--shadow-sm);
}
.input-common::placeholder{ color:#9ca3af; }
.input-common:focus{ box-shadow:var(--shadow-md), 0 0 0 3px var(--primary-weak); border-color:var(--primary); }
.input-common:disabled{ opacity:.6; cursor:not-allowed; }

/* 多行文本（内容区） */
#txtContent{ font:inherit; line-height:inherit; white-space:pre-wrap; min-height:300px; }

/* Markdown 工具栏 */
.mdbar{
  display:flex; gap:6px; flex-wrap:wrap;
  border:1px solid var(--border); border-bottom:none;
  border-radius:var(--radius) var(--radius) 0 0; padding:6px; background:var(--bg-muted);
}
.mdbtn{
  padding:6px 8px; border:1px solid var(--border); border-radius:var(--radius-sm);
  background:var(--bg); cursor:pointer; font-size:12px; user-select:none;
  transition:transform .12s ease, box-shadow .12s ease, background-color .12s ease, border-color .12s ease;
}
.mdbtn:hover{ background:#f9fafb; border-color:var(--primary); }
.mdbtn:active{ transform:translateY(1px); }

/* 文本域外框（合并上下边框圆角） */
.textarea-wrap{ border:1px solid var(--border); border-radius:0 0 var(--radius) var(--radius); overflow:hidden; background:var(--bg); }
.textarea-wrap textarea{ border:none; border-radius:0; }

/* 拖拽区最小高度统一 */
.drop{ min-height:140px; }

/* ===== 下拉框 ===== */
.select-common{
  background:var(--bg); border:1px solid var(--border); outline:none; width:100%;
  padding:8px 36px 8px 12px; border-radius:var(--radius);
  appearance:none; -webkit-appearance:none; -moz-appearance:none;
  background-image:
    linear-gradient(transparent,transparent),
    url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24"><path d="M7 10l5 5 5-5" fill="none" stroke="%236b7280" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>');
  background-repeat:no-repeat; background-position:right 10px center; background-size:14px 14px;
  transition:box-shadow .2s ease, border-color .2s ease;
  box-shadow:var(--shadow-sm);
}
.select-common:focus{ box-shadow:var(--shadow-md), 0 0 0 3px var(--primary-weak); border-color:var(--primary); }
.select-common:disabled{ opacity:.6; cursor:not-allowed; }

/* ===== 复选框（通用） ===== */
.checkbox-common{
  width:16px; height:16px; border-radius:4px; border:none; display:inline-block;
  background:var(--bg); cursor:pointer; vertical-align:middle; appearance:none; -webkit-appearance:none;
  box-shadow:inset 0 1px 3px rgba(0,0,0,.15);
  transition:box-shadow .2s ease, transform .1s ease, background-color .2s ease;
}
.checkbox-common:hover{ box-shadow:inset 0 2px 6px rgba(0,0,0,.25); }
.checkbox-common:checked{
  background:
    radial-gradient(circle at 50% 50%, var(--primary) 50%, var(--primary) 50%) no-repeat center/70% 70%, var(--bg);
  box-shadow:inset 0 2px 6px rgba(0,0,0,.25);
}
.checkbox-common:focus{ outline:none; box-shadow:inset 0 2px 6px rgba(0,0,0,.25), 0 0 0 3px var(--primary-weak); }
.checkbox-common:disabled{ opacity:.6; cursor:not-allowed; }

/* ===== 侧栏（列宽=按钮宽，按钮绝对居中） ===== */
.layout{
  display:grid; grid-template-columns:1fr var(--rail-btn); gap:0; min-height:100vh;
}
.main{ min-width:0; }
.rail{
  margin:0 !important; padding:6px 0;
  display:grid; grid-auto-rows:min-content; justify-items:center; align-content:start;
  overflow:hidden; box-sizing:border-box; background:var(--bg-muted); border:1px solid var(--border); border-radius:12px;
}
.railbtn{
  width:var(--rail-btn); height:var(--rail-btn); box-sizing:border-box; margin:0; flex-shrink:0;
  border:none; border-radius:8px; background:#f8fafc; cursor:pointer;
  display:flex; align-items:center; justify-content:center;
  transition:transform .2s ease, box-shadow .2s ease, background-color .2s ease, border-color .2s ease;
}
.railbtn:hover{ box-shadow:0 2px 5px rgba(0,0,0,.2); }
.railbtn:active{ transform:translateY(1px); }
.railbtn:focus-visible,
.railbtn.active{
  background:#ffffff; border:1px solid var(--border);
}

/* ===== 对话框与遮罩 ===== */
dialog{ border:none; border-radius:12px; padding:12px; box-shadow:0 4px 12px rgba(0,0,0,.12); background:var(--bg); }
dialog::backdrop{ background:rgba(0,0,0,.2); }
dialog h3{ margin:0 0 8px; font-size:16px; color:var(--text); }

/* POST 模板区文本字体统一等宽 */
#tplArea{ font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace; }

/* ===== AI 开关（保持原控件，仅视觉统一） ===== */
.switch-ai input[type="checkbox"]{ appearance:auto; accent-color:var(--primary); width:16px; height:16px; }
.switch-ai label{ margin:0 0 0 8px; font-weight:600; color:#1f2937; }

/* ===== 自定义 Toggle 组件（可选，不影响原checkbox） ===== */
.switch{ --h:18px; --p:2px; width:34px; height:var(--h); position:relative; display:inline-block; }
.switch input{ opacity:0; width:0; height:0; }
.switch .slider{
  position:absolute; inset:0; cursor:pointer; background:#e2e8f0; border-radius:999px;
  transition:background-color .2s ease; box-shadow:inset 0 2px 4px rgba(0,0,0,.08);
}
.switch .slider:before{
  content:""; position:absolute; border-radius:50%;
  width:calc(var(--h) - 2*var(--p)); height:calc(var(--h) - 2*var(--p));
  left:var(--p); bottom:var(--p); background:#fff; box-shadow:0 2px 4px rgba(0,0,0,.15);
}
.switch input:checked + .slider{ background:#3b82f6; }
.switch input:checked + .slider:before{ left:calc(100% - var(--h) + var(--p)); }
.switch .slider:after{
  content:""; position:absolute; top:50%; left:50%;
  width:var(--h); height:var(--h); border-radius:50%;
  transform:translate(-50%,-50%); opacity:0; background:rgba(255,255,255,.28); transition:opacity .18s ease;
}
.switch input:checked + .slider:after{ opacity:1; }
/* 关键：让面板内部可滚动，而不是整页 */
.pha-wrapper{
  display:flex;
  flex-direction:column;
  min-height:0;        /* 允许子项计算高度 */
}

/* 头部占固有高度，不参与拉伸 */
.header{
  flex:0 0 auto;
}

/* 内容区占满剩余空间并出现滚动条 */
.inner-pad{
  flex:1 1 auto;
  min-height:0;        /* 修复 flex 子项溢出导致不滚动的问题 */
  overflow:auto;       /* 超出时显示滚动条 */
  overscroll-behavior:contain;
}

/* 保险：容器使用视口高，避免双重滚动 */
.container{
  height:100svh;       /* 或 100vh，svh 兼容移动端地址栏 */
}

/* 可选：滚动条样式与全局一致（若已存在可忽略） */
*{ scrollbar-width:thin; scrollbar-color:#CBD5E1 transparent; }
*::-webkit-scrollbar{ width:8px; height:8px; }
*::-webkit-scrollbar-thumb{ background:#CBD5E1; border-radius:8px; }
*::-webkit-scrollbar-thumb:hover{ background:#94A3B8; }
